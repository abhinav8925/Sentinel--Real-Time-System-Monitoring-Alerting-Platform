<!DOCTYPE html>
<html>
<head>
    <title>Sentinel Monitoring Dashboard</title>
    <style>
        body {
            font-family: Arial;
            background: #0f172a;
            color: white;
            text-align: center;
        }
        h1 { color: #38bdf8; }
        .card {
            background: #1e293b;
            padding: 20px;
            margin: 20px;
            border-radius: 12px;
            display: inline-block;
            width: 200px;
        }
        .value { font-size: 32px; font-weight: bold; }
        .alerts {
            margin-top: 30px;
            text-align: left;
            width: 60%;
            margin-left: auto;
            margin-right: auto;
        }
        .alert {
            background: #dc2626;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>

<h1>üöÄ Sentinel Real-Time Monitoring</h1>

<div class="card">
    <h2>CPU Usage</h2>
    <div id="cpu" class="value">0%</div>
</div>

<div class="card">
    <h2>Memory Usage</h2>
    <div id="memory" class="value">0%</div>
</div>

<div class="alerts">
    <h2>‚ö†Ô∏è Alerts</h2>
    <div id="alertBox"></div>
</div>

<script src="/socket.io/socket.io.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {

    const socket = io();
    const alertBox = document.getElementById("alertBox");

    
    socket.on("metrics", data => {
        document.getElementById("cpu").innerText = data.cpuUsage + "%";
        document.getElementById("memory").innerText = data.memoryUsage + "%";
    });


    socket.on("alerts", alerts => {


        if(alertBox.childElementCount === 0) {
            alertBox.innerHTML = "";
        }

        alerts.forEach(alert => {
            const div = document.createElement("div");
            div.className = "alert";

            const time = new Date(alert.createdAt).toLocaleTimeString();

            div.innerText = `[${time}] ${alert.message}`;

            alertBox.prepend(div);
        });
    });

});
</script>

</body>
</html>